"use strict";(self.webpackChunknote_goat=self.webpackChunknote_goat||[]).push([[631],{8631:function(e,t,n){n.r(t),n.d(t,{FileHandle:function(){return m}});var r=n(1413),a=n(4165),i=n(5647),o=n(3433),s=n(5861),u=n(5671),c=n(3144),l=n(465),h=n(2047),p=h.Z.WritableStream,d=h.Z.TransformStream,f=h.Z.DOMException,y=h.Z.Blob,v=l.errors.GONE,_=/constructor/i.test(window.HTMLElement),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unkown";(0,u.Z)(this,e),this.name=t,this.kind="file"}return(0,c.Z)(e,[{key:"getFile",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw(0,i.Z)(f,(0,o.Z)(v));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"isSameEntry",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this===t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createWritable",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,i,o,s,u,c,l,h,f,v,m,w,k,Z=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Z.length>0&&void 0!==Z[0]?Z[0]:{},e.next=3,null===(t=navigator.serviceWorker)||void 0===t?void 0:t.getRegistration();case 3:return i=e.sent,o=document.createElement("a"),s=new d,u=s.writable,o.download=this.name,_||!i?(c=[],s.readable.pipeTo(new p({write:function(e){c.push(new y([e]))},close:function(){var e=new y(c,{type:"application/octet-stream; charset=utf-8"});c=[],o.href=URL.createObjectURL(e),o.click(),setTimeout((function(){return URL.revokeObjectURL(o.href)}),1e4)}}))):(l=new g(p),h=l.writable,f=l.readablePort,v=encodeURIComponent(this.name).replace(/['()]/g,escape).replace(/\*/g,"%2A"),m=(0,r.Z)({"content-disposition":"attachment; filename*=UTF-8''"+v,"content-type":"application/octet-stream; charset=utf-8"},n.size?{"content-length":n.size}:{}),w=setTimeout((function(){return i.active.postMessage(0)}),1e4),s.readable.pipeThrough(new d({transform:function(e,t){if(e instanceof Uint8Array)return t.enqueue(e);var n=new Response(e).body.getReader();return function e(r){return n.read().then((function(n){return n.done?0:e(t.enqueue(n.value))}))}()}})).pipeTo(h).finally((function(){clearInterval(w)})),i.active.postMessage({url:i.scope+v,headers:m,readablePort:f},[f]),(k=document.createElement("iframe")).hidden=!0,k.src=i.scope+v,document.body.appendChild(k)),e.abrupt("return",u.getWriter());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),w=function(){function e(t){var n=this;(0,u.Z)(this,e),t.onmessage=function(e){return n._onMessage(e.data)},this._port=t,this._resetReady()}return(0,c.Z)(e,[{key:"start",value:function(e){return this._controller=e,this._readyPromise}},{key:"write",value:function(e){var t={type:0,chunk:e};return this._port.postMessage(t,[e.buffer]),this._resetReady(),this._readyPromise}},{key:"close",value:function(){this._port.postMessage({type:2}),this._port.close()}},{key:"abort",value:function(e){this._port.postMessage({type:1,reason:e}),this._port.close()}},{key:"_onMessage",value:function(e){0===e.type&&this._resolveReady(),1===e.type&&this._onError(e.reason)}},{key:"_onError",value:function(e){this._controller.error(e),this._rejectReady(e),this._port.close()}},{key:"_resetReady",value:function(){var e=this;this._readyPromise=new Promise((function(t,n){e._readyResolve=t,e._readyReject=n})),this._readyPending=!0}},{key:"_resolveReady",value:function(){this._readyResolve(),this._readyPending=!1}},{key:"_rejectReady",value:function(e){this._readyPending||this._resetReady(),this._readyPromise.catch((function(){})),this._readyReject(e),this._readyPending=!1}}]),e}(),g=(0,c.Z)((function e(t){(0,u.Z)(this,e);var n=new MessageChannel;this.readablePort=n.port1,this.writable=new t(new w(n.port2))}))}}]);
//# sourceMappingURL=631.25ada65f.chunk.js.map